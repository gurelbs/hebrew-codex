{"version":3,"sources":["components/InputWithMic.jsx","api.js","App.js","hooks/useLocalStorge.js","index.js"],"names":["InputWithMic","value","hendleKeyDown","hendleChange","hendleClick","listening","loading","hendleSendBtn","transcript","className","Badge","color","variant","overlap","badgeContent","Fab","disabled","onClick","maxwidth","Typography","OutlinedInput","fullWidth","multiline","sx","direction","display","alignItems","border","outline","endAdornment","InputAdornment","position","transform","type","autoFocus","placeholder","onChange","onKeyDown","dotenv","config","path","process","REACT_APP_DN1","REACT_APP_DN2","url","REACT_APP_LOCAL","api","axios","create","baseURL","sni_endpoint","App","useState","textQuery","setTextQuery","setLoading","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","useLocalStorge","results","setResults","useSpeechRecognition","finalTranscript","resetTranscript","startListening","SpeechRecognition","stopListening","abortListening","start","useCallback","continuous","interimResults","language","stop","fetchData","inputType","a","post","data","res","answer","trim","console","log","sendInput","e","target","error","style","width","height","theme","defaultLanguage","defaultValue","Backdrop","zIndex","drawer","open","CircularProgress","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c2129c53.chunk.js","sourcesContent":["import React from 'react'\r\n// mui\r\nimport { Badge, InputAdornment, OutlinedInput, Typography } from '@mui/material'\r\nimport Fab from '@mui/material/Fab'\r\nimport MicIcon from '@mui/icons-material/Mic'\r\nimport MicOffIcon from '@mui/icons-material/MicOff'\r\nimport SendIcon from '@mui/icons-material/Send'\r\n\r\nexport default function InputWithMic({\r\n\tvalue,\r\n\thendleKeyDown,\r\n\thendleChange,\r\n\thendleClick,\r\n\tlistening,\r\n\tloading,\r\n\thendleSendBtn,\r\n\ttranscript\r\n}) {\r\n\treturn (\r\n\t\t<div className='input-container'>\r\n\t\t\t<div className='input-recognition'>\r\n\t\t\t\t{/* <Typography variant='body1' color={theme.palette.grey}>\r\n\t\t\t\t\t{listening ? 'כיבוי' : 'הפעלת'} זיהוי קולי\r\n\t\t\t\t</Typography> */}\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\tvariant={listening && !loading ? 'dot' : null}\r\n\t\t\t\t\toverlap='circular'\r\n\t\t\t\t\tbadgeContent={listening ? ' ' : null}>\r\n\t\t\t\t\t<Fab\r\n\t\t\t\t\t\tvariant={listening ? 'extended' : 'circular'}\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tonClick={hendleClick}\r\n\t\t\t\t\t\tmaxwidth='sm'>\r\n\t\t\t\t\t\t{listening ? <MicIcon /> : <MicOffIcon />}\r\n\t\t\t\t\t</Fab>\r\n\t\t\t\t</Badge>\r\n\t\t\t\t<Typography variant='body1' className='input-container__text'>\r\n\t\t\t\t\t{transcript}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t\t<div className='input-text'>\r\n\t\t\t\t<OutlinedInput\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tsx={{\r\n\t\t\t\t\t\tdirection: 'rtl',\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\tborder: 0,\r\n\t\t\t\t\t\toutline: 0,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t<InputAdornment position='end'>\r\n\t\t\t\t\t\t\t<Fab variant={'extended'} disabled={loading} onClick={hendleSendBtn} maxwidth='sm'>\r\n\t\t\t\t\t\t\t\t<SendIcon\r\n\t\t\t\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\t\t\t\ttransform: 'rotate(180deg)',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Fab>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tplaceholder='אפשר לשאול אותי כל דבר, אעשה כמיטב יכולתי!'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={hendleChange}\r\n\t\t\t\t\tonKeyDown={hendleKeyDown}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import axios from 'axios';\r\nimport dotenv from 'dotenv';\r\ndotenv.config({ path: '../.env' });\r\n\r\nconst {\r\n  REACT_APP_DN1,\r\n  REACT_APP_DN2,\r\n  REACT_APP_LOCAL\r\n} = process.env;\r\n\r\nconst url = process.env.NODE_ENV === 'production' \r\n  ? REACT_APP_DN1 || REACT_APP_DN2\r\n  : REACT_APP_LOCAL;\r\n\r\nconst api = axios.create({\r\n  baseURL: url,\r\n  sni_endpoint: url,\r\n});\r\n\r\nexport default api;","import { useState, useEffect, useCallback } from 'react'\nimport Editor from '@monaco-editor/react'\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'\nimport axios from 'axios'\nimport InputWithMic from './components/InputWithMic'\nimport useLocalStorge from './hooks/useLocalStorge'\nimport Backdrop from '@mui/material/Backdrop'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport api from './api'\nexport default function App() {\n\tconst url =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? 'https://magniv.cf/codex'\n\t\t\t: 'http://localhost:4000/codex'\n\tconst [textQuery, setTextQuery] = useState('')\n\tconst [loading, setLoading] = useState(false)\n\tconst [results, setResults] = useLocalStorge('results', '')\n\tconst { transcript, finalTranscript, listening, resetTranscript } = useSpeechRecognition()\n\tconst { startListening, stopListening, abortListening } = SpeechRecognition\n\tconst start = useCallback(() => {\n\t\tstartListening({\n\t\t\tcontinuous: true,\n\t\t\tinterimResults: true,\n\t\t\tlanguage: 'iw-IL',\n\t\t})\n\t}, [startListening])\n\tconst stop = useCallback(() => stopListening(), [stopListening])\n\n\tconst fetchData = useCallback(\n\t\tasync inputType => {\n\t\t\ttry {\n\t\t\t\tsetLoading(true)\n\t\t\t\tconst { data } = await api.post(`codex?q=${inputType}`)\n\t\t\t\tsetResults(res => `${res}\\n\\n/*${inputType}*/\\n\\n${data.answer.trim()}`)\n\t\t\t\tsetLoading(false)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error)\n\t\t\t}\n\t\t},\n\t\t[url, setResults]\n\t)\n\n\tconst sendInput = useCallback(\n\t\tinputType => {\n\t\t\tif (inputType && inputType !== '') {\n\t\t\t\tfetchData(inputType)\n\t\t\t\tresetTranscript()\n\t\t\t\tsetTextQuery('')\n\t\t\t\tresetTranscript()\n\t\t\t}\n\t\t},\n\t\t[fetchData, resetTranscript]\n\t)\n\n\tfunction hendleKeyDown(e) {\n\t\ttry {\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\tsendInput(textQuery)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tif (finalTranscript && finalTranscript !== '' && finalTranscript === transcript) {\n\t\t\tsendInput(finalTranscript)\n\t\t}\n\t}, [finalTranscript, transcript, abortListening, resetTranscript, sendInput])\n\treturn (\n\t\t<div className='App'>\n\t\t\t<div className='aditor-container'>\n\t\t\t\t<InputWithMic\n\t\t\t\t\tvalue={textQuery}\n\t\t\t\t\ttranscript={transcript}\n\t\t\t\t\tloading={loading}\n\t\t\t\t\thendleClick={listening ? stop : start}\n\t\t\t\t\thendleSendBtn={() => sendInput(textQuery)}\n\t\t\t\t\thendleChange={e => setTextQuery(e.target.value)}\n\t\t\t\t\tlistening={listening}\n\t\t\t\t\thendleKeyDown={hendleKeyDown}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className='aditor-container'>\n\t\t\t\t<Editor\n\t\t\t\t\tstyle={{ width: '100%', height: '100%', position: 'relative' }}\n\t\t\t\t\ttheme='vs-dark'\n\t\t\t\t\tdefaultLanguage='javascript'\n\t\t\t\t\tvalue={results}\n\t\t\t\t\tdefaultValue={results}\n\t\t\t\t\tonChange={setResults}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Backdrop\n\t\t\t\t\tsx={{ color: '#fff', zIndex: theme => theme.zIndex.drawer + 1 }}\n\t\t\t\t\topen={loading}>\n\t\t\t\t\t<CircularProgress color='inherit' />\n\t\t\t\t</Backdrop>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import {useEffect, useState} from 'react'\r\n\r\nconst PREFIX = 'codex-'\r\n\r\nexport default function useLocalStorge(key, initialValue) {\r\n\r\n    const prefixedKey = PREFIX + key;\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey);\r\n\r\n        if (jsonValue != null) {\r\n            return JSON.parse(jsonValue)\r\n        };\r\n\r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect( () => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue]\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}